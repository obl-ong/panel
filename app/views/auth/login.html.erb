<% content_for :head do %>
<meta name="turbo-visit-control" content="reload">
<% end %>
<section data-controller="webauthn" data-webauthn-options-value="<%= @options.to_json %>" data-webauthn-csrf-value="<%= session[:_csrf_token]%>">
	<%= image_tag "oval.svg", size: "200" %>
	<h1>Login to continue to <br><b>Obl.ong</b></h1>
	<p>Don't have an account? <a href="/users/register">Register</a></p>
	<div>
	<button style="display: flex; transform: scale(1.1);" data-action="click->webauthn#askAndLogin"> 
		<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 489 475" width="16" height="16"><style>.a{fill:var(--cultured)}.b{fill:var(--winter-sky)}</style><path class="a" d="m326 348c0 37.2-0.1 73.8 0.1 110.5 0 3.6-0.8 4.6-4.6 4.6q-157.9-0.2-315.9 0c-3.4 0-4.8-0.4-4.7-4.5 0.7-20.8-1.3-41.7 1-62.4 5-43 25.1-77.7 59.7-103.7 26.6-20 56.8-29.7 90.3-29.5 25.9 0.1 51.9-0.1 77.9 0 19.1 0.1 37.2 4.5 54.8 11.8 2 0.9 3.1 2.1 4 4 8.3 17.2 19.7 32 34.6 43.9 2 1.6 2.9 3.2 2.9 5.8-0.2 6.3-0.1 12.7-0.1 19.5z"></path><path class="a" d="m300.9 104.4c1.7 48.7-17.9 85.7-60.6 108.4-67.8 36-150.6-6-163.1-81.8-10.3-62.5 34.5-122.4 97.2-129.9 60.6-7.2 115.4 33.8 125.4 93.9 0.5 2.9 0.7 5.9 1.1 9.4z"></path><path class="a" d="m348.4 155.3c34.5-24.2 77.3-23.1 108.5 2.7 48.9 40.4 39.7 118-17.3 146-2.1 1-4.1 2-7.1 3.4 9.4 9.2 18.4 18.3 27.6 27 3.1 2.8 3 4.4 0 7.2-10.5 10.2-20.7 20.8-31.2 31-2.2 2.2-2.5 3.3-0.1 5.7 10.7 10.4 21.2 21.2 31.9 31.7 2.6 2.5 2.3 3.8-0.1 6.1-18.8 18.7-37.6 37.4-56.2 56.3-2.8 2.8-4.3 2.5-6.9-0.1q-15.2-15.6-30.7-30.8c-2.5-2.4-3.4-4.9-3.4-8.3 0.1-41.3 0.1-82.7 0.1-124 0-3-0.5-5-3.6-6.7-56.8-31-62.8-106.6-11.5-147.2z"></path><path class="b" d="m386.5 220.6c-15.5-13.3-13.1-34.9 4.5-42.8 10.4-4.7 22.9-1.4 29.9 7.8 6.8 8.9 6.6 21.7-0.5 30.5-7.3 8.9-19.4 11.7-29.7 6.9-1.4-0.6-2.6-1.4-4.2-2.4z"></path></svg>		
		Login with a Passkey
	</button>
	<div style="transform: scale(0.9);" >
	<h2>OR</h2>
	<%= form_with url: auth_email_path, method: :get do |form| %>
		<%= form.text_field :email, placeholder: "Enter your email" %>
		<%= form.submit "Log in with a code", class: "outline-pink-border", style: "padding-top: 8px; padding-bottom: 8px;" %>
	<% end %>
	</div>
	<p data-webauthn-target="error" class="error"></p>
	<div>
		<p>Having trouble? <a href="mailto:support@obl.ong">support@obl.ong</a></p>
		<p><a href="https://obl.ong">What's Obl.ong?</a></p>
	</div>
</section>

<style>
	main {
		padding: 5rem;
		padding-top: 4rem;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 1rem;
		min-height: 100vh;
	}

	.error {
		font-style: italic;
		color: var(--lemon-glacier);
	}

	h1 {
		font-weight: 300;
		font-size: 2.5rem;
		padding: 0;
		margin: 0;
	}

	div {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	a {
		color: var(--winter-sky);
	}

	a:hover {
		font-style: italic;
	}
	
	b {
		font-weight: 700; 
	}
	
	form {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	section {
		display: flex;
		flex-direction: column;
		gap: 1.25rem;
		align-items: center;
		text-align: center;
	}
</style>